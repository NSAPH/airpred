---
title: "Preparation of Data for Training"
author: "Ben Sabath"
date: "3/7/2018"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(airpred)
```



## Data Preparation

There is a three part process to get the assembled data sets ready for use in the training process. The first step is the transformation process which is intended to give all variables in the dataset a less disperse distrobution. Second is the normalization step which converts the values to exists on a scale of 0 to 1. Finally, an imputation step is carried out on a subset of the variables with a large number of missing values.

## Notation

The following notation will be used throughout this vignette. $x_i$ represents a given value of the particular variable being transformed. $\bar{x}$ represents the mean of a given variable. $x_{min}$ represents the minimum value of a given variable. $x_{max}$ represents the maximum value of a given variable. $x_{pN}$ represents the Nth percentile of a given variable (for example $x_{p80}$ represents the 80th percentile). $x_{min-}$ represents the value produced by the expression $x_{min} - (x_{p1} - x_{min})$. $x_{max+}$ represents the value generated by the expression $x_{max} + (x_{max} - x_{p99})$.

## Transformation
The transformation step is a formula developed by Qian Di to reduce the impact of outliers on the values generated during the normalization process. Each varible is transformed according the following formula:

A scaling factor $k$ is defined in the following way:

$$
k = (x_{p80} - x_{p20})/(2*\text{arctanh }{0.80})
$$

Then, the following calculation is made:

$$
x_{out} = \bar{x} + k\text{ arctanh}(2(x_i - 0.5(x_{min-} + x_{max+})/(x_{max+} - x_{min-}))
$$

## Normalization

## Imputation
